"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{7261:(t,e,i)=>{i.d(e,{default:()=>d});var s=i(5155),n=i(6874),o=i.n(n),r=i(5695),a=i(2115);function l(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.filter(Boolean).join(" ")}let c=[{title:"Rooms",link:"/rooms",type:"dropdown",childList:[{title:"Lost in Space",slug:"lost-in-space"},{title:"The Lost Realm: Eldora",slug:"the-lost-realm-eldora"},{title:"Earthquake: Final Tremor",slug:"earthquake-final-tremor"},{title:"Eclipse Express",slug:"eclipse-express"},{title:"The Fear Extraction Lab",slug:"the-fear-extraction-lab"}]},{title:"Events & Corporates",link:"/events-corporate",type:"link"},{title:"Blogs",link:"/blogs",type:"link"},{title:"Contact Us",link:"/contact-us",type:"link"}];function h(t){let{isMobile:e=!1,isActive:i,onClickLink:n}=t;return c.map(t=>{if("dropdown"===t.type&&t.childList){var r,a;return e?(0,s.jsxs)("details",{className:"group",children:[(0,s.jsx)("summary",{className:"cursor-pointer text-sm font-bold hover:text-[#9000FF]",children:t.title}),(0,s.jsx)("div",{className:"pl-4 pt-2 flex flex-col gap-1",children:t.childList.map(t=>(0,s.jsx)(o(),{href:"/rooms/".concat(t.slug),onClick:n,children:(0,s.jsx)("span",{className:"text-sm font-bold hover:text-[#9000FF] cursor-pointer",children:t.title})},t.slug))})]},t.title):(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)(o(),{href:null!==(r=t.link)&&void 0!==r?r:"#",className:l("text-sm font-bold cursor-pointer transition",i(null!==(a=t.link)&&void 0!==a?a:"")?"text-[#9000FF] underline":"hover:text-[#9000FF]"),children:[t.title," ",(0,s.jsx)("span",{className:"ml-1",children:"▾"})]}),(0,s.jsx)("div",{className:"absolute left-0 mt-2 bg-accent rounded-md shadow-md p-4 w-64 z-20 opacity-0 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300 pointer-events-none group-hover:pointer-events-auto -translate-y-2",role:"menu","aria-label":"".concat(t.title," Dropdown"),children:t.childList.map(t=>(0,s.jsx)(o(),{href:"/rooms/".concat(t.slug),children:(0,s.jsx)("span",{className:"py-1 block text-sm font-bold hover:text-[#9000FF] cursor-pointer",children:t.title})},t.slug))})]},t.title)}return(0,s.jsx)(o(),{href:t.link,onClick:n,children:(0,s.jsx)("span",{className:l("text-sm font-bold cursor-pointer transition",i(t.link)?"text-[#9000FF] underline":"hover:text-[#9000FF]"),children:t.title})},t.title)})}function d(){let t=(0,r.usePathname)(),e=(0,r.useRouter)(),[i,n]=(0,a.useState)(!1),c=e=>t===e;return(0,s.jsxs)("header",{className:"bg-dark text-white w-full fixed z-50 top-0",children:[(0,s.jsxs)("nav",{className:"flex justify-between items-center py-5 px-22 md:px-26 relative",children:[(0,s.jsx)(o(),{href:"/",className:"text-xl font-semibold",children:"Logo"}),(0,s.jsx)("button",{className:"md:hidden text-white text-2xl",onClick:()=>n(!i),"aria-label":"Toggle Mobile Menu",children:"☰"}),(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-6",children:[h({isActive:c}),(0,s.jsx)("button",{onClick:()=>e.push("/booking"),className:"bg-[#9000FF] cursor-pointer text-white px-4 py-1.5 rounded-full font-semibold hover:bg-white hover:text-[#9000FF] border-2 border-[#9000FF] transition",children:"Book Now"})]})]}),(0,s.jsx)("div",{className:l("md:hidden flex flex-col bg-gunmetal text-white px-6 pt-2 pb-4 gap-4 transition-all duration-300 overflow-hidden",i?"max-h-[500px] opacity-100":"max-h-0 opacity-0 pointer-events-none"),children:(0,s.jsxs)("nav",{className:"flex flex-col gap-2",role:"navigation","aria-label":"Mobile Navigation",children:[h({isMobile:!0,isActive:c,onClickLink:()=>n(!1)}),(0,s.jsx)("button",{onClick:()=>{n(!1),e.push("/booking")},className:"mt-2 bg-[#9000FF] text-white px-4 py-2 rounded-full font-semibold hover:bg-white hover:text-[#9000FF] border-2 border-[#9000FF] transition",children:"Book Now"})]})})]})}},8553:(t,e,i)=>{i.d(e,{default:()=>g});var s=i(5155),n=i(2115),o=i(4664),r=i(107),a=i(1013),l=i(6637);class c{constructor(t,e,i){this.a=t,this.b=e,this.c=i}}class h{constructor(t,e,i){this.position=o.fA(t,e,i),this.normal=o.vt(),this.uv=r.vt()}}class d{addVertex(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(let t=0;t<e.length;t+=3)this.vertices.push(new h(e[t],e[t+1],e[t+2]));return this}addFace(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(let t=0;t<e.length;t+=3)this.faces.push(new c(e[t],e[t+1],e[t+2]));return this}get lastVertex(){return this.vertices[this.vertices.length-1]}subdivide(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e={},i=this.faces;for(let s=0;s<t;++s){let t=Array(4*i.length);i.forEach((i,s)=>{let n=this.getMidPoint(i.a,i.b,e),o=this.getMidPoint(i.b,i.c,e),r=this.getMidPoint(i.c,i.a,e),a=4*s;t[a+0]=new c(i.a,n,r),t[a+1]=new c(i.b,o,n),t[a+2]=new c(i.c,r,o),t[a+3]=new c(n,o,r)}),i=t}return this.faces=i,this}spherize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.vertices.forEach(e=>{o.S8(e.normal,e.position),o.hs(e.position,e.normal,t)}),this}get data(){return{vertices:this.vertexData,indices:this.indexData,normals:this.normalData,uvs:this.uvData}}get vertexData(){return new Float32Array(this.vertices.flatMap(t=>Array.from(t.position)))}get normalData(){return new Float32Array(this.vertices.flatMap(t=>Array.from(t.normal)))}get uvData(){return new Float32Array(this.vertices.flatMap(t=>Array.from(t.uv)))}get indexData(){return new Uint16Array(this.faces.flatMap(t=>[t.a,t.b,t.c]))}getMidPoint(t,e,i){let s=t<e?"k_".concat(e,"_").concat(t):"k_".concat(t,"_").concat(e);if(Object.prototype.hasOwnProperty.call(i,s))return i[s];let n=this.vertices[t].position,o=this.vertices[e].position,r=this.vertices.length;return i[s]=r,this.addVertex((n[0]+o[0])*.5,(n[1]+o[1])*.5,(n[2]+o[2])*.5),r}constructor(){this.vertices=[],this.faces=[]}}class u extends d{constructor(){super();let t=.5*Math.sqrt(5)+.5;this.addVertex(-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1).addFace(0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1)}}class m extends d{constructor(t=4,e=1){super();let i=Math.max(4,t),s=2*Math.PI/i;this.addVertex(0,0,0),this.lastVertex.uv[0]=.5,this.lastVertex.uv[1]=.5;for(let t=0;t<i;++t){let i=Math.cos(s*t),n=Math.sin(s*t);this.addVertex(e*i,e*n,0),this.lastVertex.uv[0]=.5*i+.5,this.lastVertex.uv[1]=.5*n+.5,t>0&&this.addFace(0,t,t+1)}this.addFace(0,i,1)}}function f(t,e,i){let s=t.createBuffer();if(!s)throw Error("Failed to create WebGL buffer.");return t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,e,i),t.bindBuffer(t.ARRAY_BUFFER,null),s}class v{update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=t/e+1e-5,s=i,n=a.vt();if(this.isPointerDown){let t=.3*i,e=r.jb(r.vt(),this.pointerPos,this.previousPointerPos);if(r.hs(e,e,t),r.uE(e)>this.EPSILON){r.WQ(e,this.previousPointerPos,e);let t=this.project(e),n=this.project(this.previousPointerPos),a=o.S8(o.vt(),t),l=o.S8(o.vt(),n);r.C(this.previousPointerPos,e),s*=5/i,this.quatFromVectors(a,l,this.pointerRotation,s)}else a.nu(this.pointerRotation,this.pointerRotation,this.IDENTITY_QUAT,t)}else if(a.nu(this.pointerRotation,this.pointerRotation,this.IDENTITY_QUAT,.1*i),this.snapTargetDirection){let t=this.snapTargetDirection,e=this.snapDirection;s*=.2*Math.max(.1,1-10*o.hG(t,e)),this.quatFromVectors(t,e,n,s)}let l=a.lw(a.vt(),n,this.pointerRotation);this.orientation=a.lw(a.vt(),l,this.orientation),a.S8(this.orientation,this.orientation),a.nu(this._combinedQuat,this._combinedQuat,l,.8*i),a.S8(this._combinedQuat,this._combinedQuat);let c=2*Math.acos(this._combinedQuat[3]),h=Math.sin(c/2),d=0;h>1e-6&&(d=c/(2*Math.PI),this.rotationAxis[0]=this._combinedQuat[0]/h,this.rotationAxis[1]=this._combinedQuat[1]/h,this.rotationAxis[2]=this._combinedQuat[2]/h),this._rotationVelocity+=(d-this._rotationVelocity)*(.5*i),this.rotationVelocity=this._rotationVelocity/i,this.updateCallback(t)}quatFromVectors(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=o.$A(o.vt(),t,e);o.S8(n,n);let r=Math.acos(Math.max(-1,Math.min(1,o.Om(t,e))))*s;return a.x8(i,n,r),{q:i,axis:n,angle:r}}project(t){let e=this.canvas.clientWidth,i=this.canvas.clientHeight,s=Math.max(e,i)-1,n=(2*t[0]-e-1)/s,r=(2*t[1]-i-1)/s,a=0,l=n*n+r*r;return a=l<=2?Math.sqrt(4-l):4/Math.sqrt(l),o.fA(-n,r,a)}constructor(t,e){this.isPointerDown=!1,this.orientation=a.vt(),this.pointerRotation=a.vt(),this.rotationVelocity=0,this.rotationAxis=o.fA(1,0,0),this.snapDirection=o.fA(0,0,-1),this.snapTargetDirection=null,this.pointerPos=r.vt(),this.previousPointerPos=r.vt(),this._rotationVelocity=0,this._combinedQuat=a.vt(),this.EPSILON=.1,this.IDENTITY_QUAT=a.vt(),this.canvas=t,this.updateCallback=e||(()=>void 0),t.addEventListener("pointerdown",t=>{r.hZ(this.pointerPos,t.clientX,t.clientY),r.C(this.previousPointerPos,this.pointerPos),this.isPointerDown=!0}),t.addEventListener("pointerup",()=>{this.isPointerDown=!1}),t.addEventListener("pointerleave",()=>{this.isPointerDown=!1}),t.addEventListener("pointermove",t=>{this.isPointerDown&&r.hZ(this.pointerPos,t.clientX,t.clientY)}),t.style.touchAction="none"}}class x{resize(){let t=function(t){let e=Math.min(2,window.devicePixelRatio||1),i=Math.round(t.clientWidth*e),s=Math.round(t.clientHeight*e),n=t.width!==i||t.height!==s;return n&&(t.width=i,t.height=s),n}(this.canvas);this.gl&&(t&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight),this.updateProjectionMatrix())}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._deltaTime=Math.min(32,t-this._time),this._time=t,this._deltaFrames=this._deltaTime/this.TARGET_FRAME_DURATION,this._frames+=this._deltaFrames,this.animate(this._deltaTime),this.render(),requestAnimationFrame(t=>this.run(t))}init(t){let e=this.canvas.getContext("webgl2",{antialias:!0,alpha:!1});if(!e)throw Error("No WebGL 2 context!");this.gl=e,r.hZ(this.viewportSize,this.canvas.clientWidth,this.canvas.clientHeight),r.o8(this.drawBufferSize),this.discProgram=function(t,e,i,s){let n=t.createProgram();if(!n)return null;if([t.VERTEX_SHADER,t.FRAGMENT_SHADER].forEach((i,s)=>{let o=function(t,e,i){let s=t.createShader(e);return s?(t.shaderSource(s,i),t.compileShader(s),t.getShaderParameter(s,t.COMPILE_STATUS))?s:(console.error(t.getShaderInfoLog(s)),t.deleteShader(s),null):null}(t,i,e[s]);o&&t.attachShader(n,o)}),s)for(let e in s)Object.prototype.hasOwnProperty.call(s,e)&&t.bindAttribLocation(n,s[e],e);return(t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS))?n:(console.error(t.getProgramInfoLog(n)),t.deleteProgram(n),null)}(e,["#version 300 es\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec3 uCameraPosition;\nuniform vec4 uRotationAxisVelocity;\n\nin vec3 aModelPosition;\nin vec3 aModelNormal; // not currently used, but reserved\nin vec2 aModelUvs;\nin mat4 aInstanceMatrix;\n\nout vec2 vUvs;\nout float vAlpha;\nflat out int vInstanceId;\n\n#define PI 3.141593\n\nvoid main() {\n    vec4 worldPosition = uWorldMatrix * aInstanceMatrix * vec4(aModelPosition, 1.);\n\n    // center of the disc in world space\n    vec3 centerPos = (uWorldMatrix * aInstanceMatrix * vec4(0., 0., 0., 1.)).xyz;\n    float radius = length(centerPos.xyz);\n\n    // skip the center vertex of the disc geometry\n    if (gl_VertexID > 0) {\n        // stretch the disc according to the axis and velocity of the rotation\n        vec3 rotationAxis = uRotationAxisVelocity.xyz;\n        float rotationVelocity = min(.15, uRotationAxisVelocity.w * 15.);\n        // the stretch direction is orthogonal to the rotation axis and the position\n        vec3 stretchDir = normalize(cross(centerPos, rotationAxis));\n        // the position of this vertex relative to the center position\n        vec3 relativeVertexPos = normalize(worldPosition.xyz - centerPos);\n        // vertices more in line with the stretch direction get a larger offset\n        float strength = dot(stretchDir, relativeVertexPos);\n        float invAbsStrength = min(0., abs(strength) - 1.);\n        strength = rotationVelocity * sign(strength) * abs(invAbsStrength * invAbsStrength * invAbsStrength + 1.);\n        // apply the stretch distortion\n        worldPosition.xyz += stretchDir * strength;\n    }\n\n    // move the vertex back to the overall sphere\n    worldPosition.xyz = radius * normalize(worldPosition.xyz);\n\n    gl_Position = uProjectionMatrix * uViewMatrix * worldPosition;\n\n    vAlpha = smoothstep(0.5, 1., normalize(worldPosition.xyz).z) * .9 + .1;\n    vUvs = aModelUvs;\n    vInstanceId = gl_InstanceID;\n}\n","#version 300 es\nprecision highp float;\n\nuniform sampler2D uTex;\nuniform int uItemCount;\nuniform int uAtlasSize;\n\nout vec4 outColor;\n\nin vec2 vUvs;\nin float vAlpha;\nflat in int vInstanceId;\n\nvoid main() {\n    // Calculate which item to display based on instance ID\n    int itemIndex = vInstanceId % uItemCount;\n    int cellsPerRow = uAtlasSize;\n    int cellX = itemIndex % cellsPerRow;\n    int cellY = itemIndex / cellsPerRow;\n    vec2 cellSize = vec2(1.0) / vec2(float(cellsPerRow));\n    vec2 cellOffset = vec2(float(cellX), float(cellY)) * cellSize;\n\n    // Get texture dimensions and calculate aspect ratio\n    ivec2 texSize = textureSize(uTex, 0);\n    float imageAspect = float(texSize.x) / float(texSize.y);\n    float containerAspect = 1.0; // Assuming square container\n    \n    // Calculate cover scale factor\n    float scale = max(imageAspect / containerAspect, \n                     containerAspect / imageAspect);\n    \n    // Rotate 180 degrees and adjust UVs for cover\n    vec2 st = vec2(vUvs.x, 1.0 - vUvs.y);\n    st = (st - 0.5) * scale + 0.5;\n    \n    // Clamp coordinates to prevent repeating\n    st = clamp(st, 0.0, 1.0);\n    \n    // Map to the correct cell in the atlas\n    st = st * cellSize + cellOffset;\n    \n    outColor = texture(uTex, st);\n    outColor.a *= vAlpha;\n}\n"],0,{aModelPosition:0,aModelNormal:1,aModelUvs:2,aInstanceMatrix:3}),this.discLocations={aModelPosition:e.getAttribLocation(this.discProgram,"aModelPosition"),aModelUvs:e.getAttribLocation(this.discProgram,"aModelUvs"),aInstanceMatrix:e.getAttribLocation(this.discProgram,"aInstanceMatrix"),uWorldMatrix:e.getUniformLocation(this.discProgram,"uWorldMatrix"),uViewMatrix:e.getUniformLocation(this.discProgram,"uViewMatrix"),uProjectionMatrix:e.getUniformLocation(this.discProgram,"uProjectionMatrix"),uCameraPosition:e.getUniformLocation(this.discProgram,"uCameraPosition"),uScaleFactor:e.getUniformLocation(this.discProgram,"uScaleFactor"),uRotationAxisVelocity:e.getUniformLocation(this.discProgram,"uRotationAxisVelocity"),uTex:e.getUniformLocation(this.discProgram,"uTex"),uFrames:e.getUniformLocation(this.discProgram,"uFrames"),uItemCount:e.getUniformLocation(this.discProgram,"uItemCount"),uAtlasSize:e.getUniformLocation(this.discProgram,"uAtlasSize")},this.discGeo=new m(56,1),this.discBuffers=this.discGeo.data,this.discVAO=function(t,e,i){let s=t.createVertexArray();if(!s)return null;for(let[i,n,o]of(t.bindVertexArray(s),e))-1!==n&&(t.bindBuffer(t.ARRAY_BUFFER,i),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,o,t.FLOAT,!1,0,0));if(i){let e=t.createBuffer();e&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW))}return t.bindVertexArray(null),s}(e,[[f(e,this.discBuffers.vertices,e.STATIC_DRAW),this.discLocations.aModelPosition,3],[f(e,this.discBuffers.uvs,e.STATIC_DRAW),this.discLocations.aModelUvs,2]],this.discBuffers.indices),this.icoGeo=new u,this.icoGeo.subdivide(1).spherize(this.SPHERE_RADIUS),this.instancePositions=this.icoGeo.vertices.map(t=>t.position),this.DISC_INSTANCE_COUNT=this.icoGeo.vertices.length,this.initDiscInstances(this.DISC_INSTANCE_COUNT),this.initTexture(),this.control=new v(this.canvas,t=>this.onControlUpdate(t)),this.updateCameraMatrix(),this.updateProjectionMatrix(),this.resize(),t&&t(this)}initTexture(){if(!this.gl)return;let t=this.gl;this.tex=function(t,e,i,s,n){let o=t.createTexture();if(!o)throw Error("Failed to create WebGL texture.");return t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i),o}(t,t.LINEAR,t.LINEAR,t.CLAMP_TO_EDGE,t.CLAMP_TO_EDGE);let e=Math.max(1,this.items.length);this.atlasSize=Math.ceil(Math.sqrt(e));let i=document.createElement("canvas"),s=i.getContext("2d");i.width=512*this.atlasSize,i.height=512*this.atlasSize,Promise.all(this.items.map(t=>new Promise(e=>{let i=new Image;i.crossOrigin="anonymous",i.onload=()=>e(i),i.src=t.image}))).then(e=>{e.forEach((t,e)=>{let i=e%this.atlasSize*512,n=512*Math.floor(e/this.atlasSize);s.drawImage(t,i,n,512,512)}),t.bindTexture(t.TEXTURE_2D,this.tex),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.generateMipmap(t.TEXTURE_2D)})}initDiscInstances(t){if(!this.gl||!this.discVAO)return;let e=this.gl,i=new Float32Array(16*t),s=[];for(let e=0;e<t;++e){let t=new Float32Array(i.buffer,64*e,16);l.D_(t),s.push(t)}this.discInstances={matricesArray:i,matrices:s,buffer:e.createBuffer()},e.bindVertexArray(this.discVAO),e.bindBuffer(e.ARRAY_BUFFER,this.discInstances.buffer),e.bufferData(e.ARRAY_BUFFER,this.discInstances.matricesArray.byteLength,e.DYNAMIC_DRAW);for(let t=0;t<4;++t){let i=this.discLocations.aInstanceMatrix+t;e.enableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,64,16*t),e.vertexAttribDivisor(i,1)}e.bindBuffer(e.ARRAY_BUFFER,null),e.bindVertexArray(null)}animate(t){if(this.gl)this.control.update(t,this.TARGET_FRAME_DURATION),this.instancePositions.map(t=>o.gL(o.vt(),t,this.control.orientation)).forEach((t,e)=>{let i=(Math.abs(t[2])/this.SPHERE_RADIUS*.6+.4)*.25,s=l.vt();l.lw(s,s,l.kN(l.vt(),o.ze(o.vt(),t))),l.lw(s,s,l.xI(l.vt(),[0,0,0],t,[0,1,0])),l.lw(s,s,l.CV(l.vt(),[i,i,i])),l.lw(s,s,l.kN(l.vt(),[0,0,-this.SPHERE_RADIUS])),l.C(this.discInstances.matrices[e],s)}),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.discInstances.buffer),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,this.discInstances.matricesArray),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.smoothRotationVelocity=this.control.rotationVelocity}render(){if(!this.gl||!this.discProgram)return;let t=this.gl;t.useProgram(this.discProgram),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.uniformMatrix4fv(this.discLocations.uWorldMatrix,!1,this.worldMatrix),t.uniformMatrix4fv(this.discLocations.uViewMatrix,!1,this.camera.matrices.view),t.uniformMatrix4fv(this.discLocations.uProjectionMatrix,!1,this.camera.matrices.projection),t.uniform3f(this.discLocations.uCameraPosition,this.camera.position[0],this.camera.position[1],this.camera.position[2]),t.uniform4f(this.discLocations.uRotationAxisVelocity,this.control.rotationAxis[0],this.control.rotationAxis[1],this.control.rotationAxis[2],1.1*this.smoothRotationVelocity),t.uniform1i(this.discLocations.uItemCount,this.items.length),t.uniform1i(this.discLocations.uAtlasSize,this.atlasSize),t.uniform1f(this.discLocations.uFrames,this._frames),t.uniform1f(this.discLocations.uScaleFactor,this.scaleFactor),t.uniform1i(this.discLocations.uTex,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.tex),t.bindVertexArray(this.discVAO),t.drawElementsInstanced(t.TRIANGLES,this.discBuffers.indices.length,t.UNSIGNED_SHORT,0,this.DISC_INSTANCE_COUNT),t.bindVertexArray(null)}updateCameraMatrix(){l.xI(this.camera.matrix,this.camera.position,[0,0,0],this.camera.up),l.B8(this.camera.matrices.view,this.camera.matrix)}updateProjectionMatrix(){if(!this.gl)return;let t=this.gl.canvas;this.camera.aspect=t.clientWidth/t.clientHeight;let e=.35*this.SPHERE_RADIUS,i=this.camera.position[2];this.camera.aspect>1?this.camera.fov=2*Math.atan(e/i):this.camera.fov=2*Math.atan(e/this.camera.aspect/i),l.fN(this.camera.matrices.projection,this.camera.fov,this.camera.aspect,this.camera.near,this.camera.far),l.B8(this.camera.matrices.inversProjection,this.camera.matrices.projection)}onControlUpdate(t){let e=t/this.TARGET_FRAME_DURATION+1e-4,i=5/e,s=3,n=this.control.isPointerDown||Math.abs(this.smoothRotationVelocity)>.01;if(n!==this.movementActive&&(this.movementActive=n,this.onMovementChange(n)),this.control.isPointerDown)s+=80*this.control.rotationVelocity+2.5,i=7/e;else{let t=this.findNearestVertexIndex(),e=t%Math.max(1,this.items.length);this.onActiveItemChange(e);let i=o.S8(o.vt(),this.getVertexWorldPosition(t));this.control.snapTargetDirection=i}this.camera.position[2]+=(s-this.camera.position[2])/i,this.updateCameraMatrix()}findNearestVertexIndex(){let t=this.control.snapDirection,e=a.Xr(a.vt(),this.control.orientation),i=o.gL(o.vt(),t,e),s=-1,n=0;for(let t=0;t<this.instancePositions.length;++t){let e=o.Om(i,this.instancePositions[t]);e>s&&(s=e,n=t)}return n}getVertexWorldPosition(t){let e=this.instancePositions[t];return o.gL(o.vt(),e,this.control.orientation)}constructor(t,e,i,s,n){this.canvas=t,this.items=e,this.onActiveItemChange=i,this.onMovementChange=s,this.gl=null,this.discProgram=null,this.discVAO=null,this.worldMatrix=l.vt(),this.tex=null,this.viewportSize=r.vt(),this.drawBufferSize=r.vt(),this.instancePositions=[],this.DISC_INSTANCE_COUNT=0,this.atlasSize=1,this._time=0,this._deltaTime=0,this._deltaFrames=0,this._frames=0,this.movementActive=!1,this.TARGET_FRAME_DURATION=1e3/60,this.SPHERE_RADIUS=2,this.camera={matrix:l.vt(),near:.1,far:40,fov:Math.PI/4,aspect:1,position:o.fA(0,0,3),up:o.fA(0,1,0),matrices:{view:l.vt(),projection:l.vt(),inversProjection:l.vt()}},this.smoothRotationVelocity=0,this.scaleFactor=1,this.init(n)}}let p=[{image:"https://picsum.photos/900/900?grayscale",link:"https://google.com/",title:"",description:""}],g=t=>{let{items:e=[]}=t,i=(0,n.useRef)(null),[o,r]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let t=i.current,s=null;t&&(s=new x(t,e.length?e:p,t=>{if(!e.length)return;let i=t%e.length;r(e[i])},l,t=>t.run()));let n=()=>{s&&s.resize()};return window.addEventListener("resize",n),n(),()=>{window.removeEventListener("resize",n)}},[e]),(0,s.jsxs)("div",{className:"relative w-full h-full",children:[(0,s.jsx)("canvas",{id:"infinite-grid-menu-canvas",ref:i,className:"cursor-grab w-full h-full overflow-hidden relative outline-none active:cursor-grabbing"}),o&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("h2",{style:{fontFamily:"fantasy"},className:"\n          select-none\n          absolute\n          font-extrabold\n          [font-size:6rem]\n          left-[50%]\n          top-[95%]\n          transform\n          -translate-x-1/2\n          -translate-y-1/2\n          transition-all\n          ease-[cubic-bezier(0.25,0.1,0.25,1.0)]\n          text-[#F8EFFF]\n          font-fantasy\n          ".concat(a?"opacity-0 pointer-events-none duration-[100ms]":"opacity-100 pointer-events-auto duration-[500ms]","\n        "),children:o.title})})]})}}}]);